{"version":3,"sources":["../../src/react/plugins.ts","../../src/lib/BaseAudioPlugin.ts","../../src/lib/BaseFilePlugin.ts","../../src/lib/BaseVideoPlugin.ts","../../src/lib/image/BaseImagePlugin.ts","../../src/lib/image/transforms/insertImage.ts","../../src/lib/image/utils/isImageUrl.ts","../../src/lib/image/withImageEmbed.ts","../../src/lib/image/withImageUpload.ts","../../src/lib/image/withImage.ts","../../src/lib/media/insertMedia.ts","../../src/lib/media/parseMediaUrl.ts","../../src/lib/media-embed/BaseMediaEmbedPlugin.ts","../../src/lib/media-embed/parseIframeUrl.ts","../../src/lib/media-embed/parseVideoUrl.ts","../../src/lib/media-embed/transforms/insertMediaEmbed.ts","../../src/lib/placeholder/BasePlaceholderPlugin.ts","../../src/react/image/ImagePreviewStore.ts","../../src/react/image/openImagePreview.ts","../../src/react/image/useImagePreview.ts","../../src/react/image/useZoom.ts","../../src/react/image/components/Image.tsx","../../src/react/image/components/PreviewImage.tsx","../../src/react/image/components/ScaleInput.tsx","../../src/react/media/mediaStore.ts","../../src/react/media/useMediaController.ts","../../src/react/media/useMediaState.ts","../../src/react/media/useMediaToolbarButton.ts","../../src/react/media/FloatingMedia/FloatingMediaEditButton.tsx","../../src/react/media/FloatingMedia/FloatingMediaStore.ts","../../src/react/media/FloatingMedia/FloatingMediaUrlInput.tsx","../../src/react/media/FloatingMedia/submitFloatingMedia.ts","../../src/react/media/FloatingMedia/FloatingMedia.tsx","../../src/react/placeholder/PlaceholderPlugin.tsx","../../src/react/placeholder/placeholderStore.ts","../../src/react/placeholder/usePlaceholderElement.ts","../../src/react/placeholder/usePlaceholderPopover.ts"],"sourcesContent":["import { toPlatePlugin } from '@udecode/plate-common/react';\n\nimport {\n  BaseAudioPlugin,\n  BaseFilePlugin,\n  BaseImagePlugin,\n  BaseMediaEmbedPlugin,\n  BaseVideoPlugin,\n} from '../lib';\n\nexport const ImagePlugin = toPlatePlugin(BaseImagePlugin);\n\nexport const MediaEmbedPlugin = toPlatePlugin(BaseMediaEmbedPlugin);\n\nexport const AudioPlugin = toPlatePlugin(BaseAudioPlugin);\n\nexport const FilePlugin = toPlatePlugin(BaseFilePlugin);\n\nexport const VideoPlugin = toPlatePlugin(BaseVideoPlugin);\n","import { createSlatePlugin } from '@udecode/plate-common';\n\nimport type { TMediaElement } from './media';\n\nexport interface TAudioElement extends TMediaElement {}\n\nexport const BaseAudioPlugin = createSlatePlugin({\n  key: 'audio',\n  node: { isElement: true, isVoid: true },\n});\n","import { createSlatePlugin } from '@udecode/plate-common';\n\nimport type { TMediaElement } from './media';\n\nexport interface TFileElement extends TMediaElement {}\n\nexport const BaseFilePlugin = createSlatePlugin({\n  key: 'file',\n  node: { isElement: true, isVoid: true },\n});\n","import { createSlatePlugin } from '@udecode/plate-common';\n\nimport type { TMediaElement } from '..';\n\nexport interface TVideoElement extends TMediaElement {}\n\nexport const BaseVideoPlugin = createSlatePlugin({\n  key: 'video',\n  node: {\n    dangerouslyAllowAttributes: ['width', 'height'],\n    isElement: true,\n    isVoid: true,\n  },\n});\n","import { type PluginConfig, createTSlatePlugin } from '@udecode/plate-common';\n\nimport type { MediaPluginOptions, TMediaElement } from '../media';\n\nimport { withImage } from './withImage';\n\nexport interface TImageElement extends TMediaElement {}\n\nexport type ImageConfig = PluginConfig<\n  'img',\n  {\n    /**\n     * An optional method that will upload the image to a server. The method\n     * receives the base64 dataUrl of the uploaded image, and should return the\n     * URL of the uploaded image.\n     */\n    uploadImage?: (\n      dataUrl: ArrayBuffer | string\n    ) => ArrayBuffer | Promise<ArrayBuffer | string> | string;\n\n    /** Disable url embed on insert data. */\n    disableEmbedInsert?: boolean;\n\n    /** Disable file upload on insert data. */\n    disableUploadInsert?: boolean;\n  } & MediaPluginOptions\n>;\n\n/** Enables support for images. */\nexport const BaseImagePlugin = createTSlatePlugin<ImageConfig>({\n  key: 'img',\n  extendEditor: withImage,\n  node: {\n    dangerouslyAllowAttributes: ['alt', 'width', 'height'],\n    isElement: true,\n    isVoid: true,\n  },\n}).extend(({ plugin }) => ({\n  parsers: {\n    html: {\n      deserializer: {\n        parse: ({ element }) => ({\n          type: plugin.node.type,\n          url: element.getAttribute('src'),\n        }),\n        rules: [\n          {\n            validNodeName: 'IMG',\n          },\n        ],\n      },\n    },\n  },\n}));\n","import {\n  type InsertNodesOptions,\n  type SlateEditor,\n  insertNodes,\n} from '@udecode/plate-common';\n\nimport { type TImageElement, BaseImagePlugin } from '../BaseImagePlugin';\n\nexport const insertImage = <E extends SlateEditor>(\n  editor: E,\n  url: ArrayBuffer | string,\n  options: InsertNodesOptions<E> = {}\n) => {\n  const text = { text: '' };\n  const image: TImageElement = {\n    children: [text],\n    type: editor.getType(BaseImagePlugin),\n    url: url as any,\n  };\n  insertNodes<TImageElement>(editor, image, {\n    nextBlock: true,\n    ...(options as any),\n  });\n};\n","import { isUrl } from '@udecode/plate-common';\n\nconst imageExtensions = new Set([\n  '3dv',\n  'PI1',\n  'PI2',\n  'PI3',\n  'ai',\n  'amf',\n  'art',\n  'art',\n  'ase',\n  'awg',\n  'blp',\n  'bmp',\n  'bw',\n  'bw',\n  'cd5',\n  'cdr',\n  'cgm',\n  'cit',\n  'cmx',\n  'cpt',\n  'cr2',\n  'cur',\n  'cut',\n  'dds',\n  'dib',\n  'djvu',\n  'dxf',\n  'e2d',\n  'ecw',\n  'egt',\n  'egt',\n  'emf',\n  'eps',\n  'exif',\n  'fs',\n  'gbr',\n  'gif',\n  'gpl',\n  'grf',\n  'hdp',\n  'icns',\n  'ico',\n  'iff',\n  'iff',\n  'int',\n  'int',\n  'inta',\n  'jfif',\n  'jng',\n  'jp2',\n  'jpeg',\n  'jpg',\n  'jps',\n  'jxr',\n  'lbm',\n  'lbm',\n  'liff',\n  'max',\n  'miff',\n  'mng',\n  'msp',\n  'nitf',\n  'nrrd',\n  'odg',\n  'ota',\n  'pam',\n  'pbm',\n  'pc1',\n  'pc2',\n  'pc3',\n  'pcf',\n  'pct',\n  'pcx',\n  'pcx',\n  'pdd',\n  'pdn',\n  'pgf',\n  'pgm',\n  'pict',\n  'png',\n  'pnm',\n  'pns',\n  'ppm',\n  'psb',\n  'psd',\n  'psp',\n  'px',\n  'pxm',\n  'pxr',\n  'qfx',\n  'ras',\n  'raw',\n  'rgb',\n  'rgb',\n  'rgba',\n  'rle',\n  'sct',\n  'sgi',\n  'sgi',\n  'sid',\n  'stl',\n  'sun',\n  'svg',\n  'sxd',\n  'tga',\n  'tga',\n  'tif',\n  'tiff',\n  'v2d',\n  'vnd',\n  'vrml',\n  'vtf',\n  'wdp',\n  'webp',\n  'wmf',\n  'x3d',\n  'xar',\n  'xbm',\n  'xcf',\n  'xpm',\n]);\n\nexport const isImageUrl = (url: string) => {\n  if (!isUrl(url)) return false;\n\n  const ext = new URL(url).pathname.split('.').pop() as string;\n\n  return imageExtensions.has(ext);\n};\n","import type { ExtendEditor } from '@udecode/plate-common';\n\nimport type { ImageConfig } from './BaseImagePlugin';\n\nimport { insertImage } from './transforms/insertImage';\nimport { isImageUrl } from './utils/isImageUrl';\n\n/** If inserted text is image url, insert image instead. */\nexport const withImageEmbed: ExtendEditor<ImageConfig> = ({\n  editor,\n  getOptions,\n}) => {\n  const { insertData } = editor;\n\n  editor.insertData = (dataTransfer: DataTransfer) => {\n    if (getOptions().disableEmbedInsert) {\n      return insertData(dataTransfer);\n    }\n\n    const text = dataTransfer.getData('text/plain');\n\n    if (isImageUrl(text)) {\n      insertImage(editor, text);\n\n      return;\n    }\n\n    insertData(dataTransfer);\n  };\n\n  return editor;\n};\n","import {\n  type ExtendEditor,\n  getInjectedPlugins,\n  pipeInsertDataQuery,\n} from '@udecode/plate-common';\n\nimport type { ImageConfig } from './BaseImagePlugin';\n\nimport { insertImage } from './transforms/insertImage';\n\n/**\n * Allows for pasting images from clipboard. Not yet: dragging and dropping\n * images, selecting them through a file system dialog.\n */\nexport const withImageUpload: ExtendEditor<ImageConfig> = ({\n  editor,\n  getOptions,\n  plugin,\n}) => {\n  const { insertData } = editor;\n\n  editor.insertData = (dataTransfer: DataTransfer) => {\n    if (getOptions().disableUploadInsert) {\n      return insertData(dataTransfer);\n    }\n\n    const text = dataTransfer.getData('text/plain');\n    const { files } = dataTransfer;\n\n    if (!text && files && files.length > 0) {\n      const injectedPlugins = getInjectedPlugins(editor, plugin);\n\n      if (\n        !pipeInsertDataQuery(editor, injectedPlugins, {\n          data: text,\n          dataTransfer,\n        })\n      ) {\n        return insertData(dataTransfer);\n      }\n\n      for (const file of files) {\n        const reader = new FileReader();\n        const [mime] = file.type.split('/');\n\n        if (mime === 'image') {\n          reader.addEventListener('load', async () => {\n            if (!reader.result) {\n              return;\n            }\n\n            const uploadImage = getOptions().uploadImage;\n\n            const uploadedUrl = uploadImage\n              ? await uploadImage(reader.result)\n              : reader.result;\n\n            insertImage(editor, uploadedUrl);\n          });\n\n          reader.readAsDataURL(file);\n        }\n      }\n    } else {\n      insertData(dataTransfer);\n    }\n  };\n\n  return editor;\n};\n","import type { ExtendEditor } from '@udecode/plate-common';\n\nimport type { ImageConfig } from './BaseImagePlugin';\n\nimport { withImageEmbed } from './withImageEmbed';\nimport { withImageUpload } from './withImageUpload';\n\n/**\n * @see withImageUpload\n * @see withImageEmbed\n */\nexport const withImage: ExtendEditor<ImageConfig> = ({ editor, ...ctx }) => {\n  editor = withImageUpload({ editor, ...ctx });\n  editor = withImageEmbed({ editor, ...ctx });\n\n  return editor;\n};\n","import type {\n  InsertNodesOptions,\n  SlateEditor,\n  TEditor,\n} from '@udecode/plate-common';\n\nimport {\n  BaseImagePlugin,\n  BaseMediaEmbedPlugin,\n  insertImage,\n  insertMediaEmbed,\n} from '../..';\n\nexport interface InsertMediaOptions<E extends TEditor = TEditor>\n  extends InsertNodesOptions<E> {\n  /**\n   * Default onClick is getting the image url by calling this promise before\n   * inserting the image.\n   */\n  getUrl?: () => Promise<string>;\n\n  type?: string;\n}\n\nexport const insertMedia = async <E extends SlateEditor>(\n  editor: E,\n  {\n    getUrl,\n    type = editor.getType(BaseImagePlugin),\n    ...options\n  }: InsertMediaOptions<E> = {}\n) => {\n  const url = getUrl\n    ? await getUrl()\n    : window.prompt(\n        `Enter the URL of the ${\n          type === BaseImagePlugin.key\n            ? BaseImagePlugin.key\n            : BaseMediaEmbedPlugin.key\n        }`\n      );\n\n  if (!url) return;\n  if (type === editor.getType(BaseImagePlugin)) {\n    insertImage(editor, url, options);\n  } else {\n    insertMediaEmbed(editor, { url }, options);\n  }\n};\n","export type EmbedUrlData = {\n  id?: string;\n  provider?: string;\n  url?: string;\n};\n\nexport type EmbedUrlParser = (url: string) => EmbedUrlData | undefined;\n\n// Unlike the link plugin, there's no legitimate reason for non-HTTP source URLs\nconst allowedProtocols = new Set(['http:', 'https:']);\n\nexport const parseMediaUrl = (\n  url: string,\n  {\n    urlParsers,\n  }: {\n    urlParsers: EmbedUrlParser[];\n  }\n): EmbedUrlData | undefined => {\n  const embed = (() => {\n    for (const parser of urlParsers) {\n      const data = parser(url);\n\n      if (data) {\n        return data;\n      }\n    }\n  })();\n\n  // Harden against XSS\n  if (embed?.url) {\n    try {\n      const { protocol } = new URL(embed.url);\n\n      if (!allowedProtocols.has(protocol)) {\n        return undefined;\n      }\n    } catch {\n      // eslint-disable-next-line no-console\n      console.warn('Could not parse URL: ' + embed.url);\n\n      return undefined;\n    }\n  }\n\n  return embed;\n};\n","import { type PluginConfig, createTSlatePlugin } from '@udecode/plate-common';\n\nimport type { MediaPluginOptions, TMediaElement } from '../media/index';\n\nimport { parseIframeUrl } from './parseIframeUrl';\n\nexport interface TMediaEmbedElement extends TMediaElement {}\n\nexport type MediaEmbedConfig = PluginConfig<'media_embed', MediaPluginOptions>;\n\n/**\n * Enables support for embeddable media such as YouTube or Vimeo videos,\n * Instagram posts and tweets or Google Maps.\n */\nexport const BaseMediaEmbedPlugin = createTSlatePlugin<MediaEmbedConfig>({\n  key: 'media_embed',\n  node: { isElement: true, isVoid: true },\n  options: {\n    transformUrl: parseIframeUrl,\n  },\n}).extend(({ type }) => ({\n  parsers: {\n    html: {\n      deserializer: {\n        parse: ({ element }) => {\n          const url = element.getAttribute('src');\n\n          if (url) {\n            return {\n              type,\n              url,\n            };\n          }\n        },\n        rules: [\n          {\n            validNodeName: 'IFRAME',\n          },\n        ],\n      },\n    },\n  },\n}));\n","export const parseIframeUrl = (url: string) => {\n  // if not starting with http, assume pasting of full iframe embed code\n  if (!url.startsWith('http')) {\n    const regexMatchSrc = /src=\".*?\"/;\n    const regexGroupQuotes = /\"([^\"]*)\"/;\n\n    const src = regexMatchSrc.exec(url)?.[0];\n    const returnString = src?.match(regexGroupQuotes)?.[1];\n\n    if (returnString) {\n      url = returnString;\n    }\n  }\n\n  return url;\n};\n","import { isUrl } from '@udecode/plate-common';\nimport videoParser from 'js-video-url-parser';\n\nimport type { EmbedUrlData } from '../media';\n\nconst YOUTUBE_PREFIX = 'https://www.youtube.com/embed/';\nconst VIMEO_PREFIX = 'https://player.vimeo.com/video/';\nconst DAILYMOTION_PREFIX = 'https://www.dailymotion.com/embed/video/';\nconst YOUKU_PREFIX = 'https://player.youku.com/embed/';\nconst COUB_PREFIX = 'https://coub.com/embed/';\n\nexport const VIDEO_PROVIDERS = [\n  'youtube',\n  'vimeo',\n  'dailymotion',\n  'youku',\n  'coub',\n];\n\nexport const parseVideoUrl = (url: string): EmbedUrlData | undefined => {\n  if (!isUrl(url)) return;\n\n  const videoData = videoParser.parse(url);\n\n  if (videoData?.provider && videoData.id) {\n    const { id, provider } = videoData;\n\n    const providerUrls: Record<string, string> = {\n      coub: `${COUB_PREFIX}${id}`,\n      dailymotion: `${DAILYMOTION_PREFIX}${id}`,\n      vimeo: `${VIMEO_PREFIX}${id}`,\n      youku: `${YOUKU_PREFIX}${id}`,\n      youtube: `${YOUTUBE_PREFIX}${id}`,\n    };\n\n    return {\n      id,\n      provider,\n      url: providerUrls[provider],\n    };\n  }\n};\n","import {\n  type InsertNodesOptions,\n  type SlateEditor,\n  getParentNode,\n  insertNodes,\n} from '@udecode/plate-common';\n\nimport {\n  type TMediaEmbedElement,\n  BaseMediaEmbedPlugin,\n} from '../BaseMediaEmbedPlugin';\n\nexport const insertMediaEmbed = <E extends SlateEditor>(\n  editor: E,\n  { url = '' }: Partial<TMediaEmbedElement>,\n  options: InsertNodesOptions<E> = {}\n): void => {\n  if (!editor.selection) return;\n\n  const selectionParentEntry = getParentNode(editor, editor.selection);\n\n  if (!selectionParentEntry) return;\n\n  const [, path] = selectionParentEntry;\n  insertNodes<TMediaEmbedElement>(\n    editor,\n    {\n      children: [{ text: '' }],\n      type: editor.getType(BaseMediaEmbedPlugin),\n      url,\n    },\n    {\n      at: path,\n      nextBlock: true,\n      ...(options as any),\n    }\n  );\n};\n","import { type PluginConfig, createTSlatePlugin } from '@udecode/plate-common';\n\nimport type { MediaPlaceholder } from './types';\n\nexport type PlaceholderConfig = PluginConfig<'placeholder', MediaPlaceholder>;\n\nexport const BasePlaceholderPlugin = createTSlatePlugin<PlaceholderConfig>({\n  key: 'placeholder',\n  node: { isElement: true, isVoid: true },\n});\n","import { createZustandStore } from '@udecode/plate-common';\n\nexport interface PreviewItem {\n  url: string;\n  id?: string;\n}\n\nexport const ImagePreviewStore = createZustandStore('imagePreview')({\n  boundingClientRect: {} as DOMRect,\n  currentPreview: null as PreviewItem | null,\n  isEditingScale: false,\n  openEditorId: null as string | null,\n  previewList: [] as PreviewItem[],\n  scale: 1 as number,\n  translate: { x: 0, y: 0 },\n})\n  .extendActions((set) => ({\n    close: () => {\n      set.currentPreview(null);\n      set.previewList([]);\n      set.openEditorId(null);\n      set.scale(1);\n      set.translate({ x: 0, y: 0 });\n      set.isEditingScale(false);\n    },\n  }))\n  .extendSelectors((state) => ({\n    isOpen: (editorId: string) => state.openEditorId === editorId,\n  }));\n\nexport const imagePreviewActions = ImagePreviewStore.set;\n\nexport const imagePreviewSelectors = ImagePreviewStore.get;\n\nexport const useImagePreviewSelectors = () => ImagePreviewStore.use;\n","import { type SlateEditor, getNodeEntries } from '@udecode/plate-common';\n\nimport type { TMediaElement } from '../../index';\n\nimport { BaseImagePlugin } from '../../lib/image/BaseImagePlugin';\nimport { type PreviewItem, imagePreviewActions } from './ImagePreviewStore';\n\nconst getUrlList = (editor: SlateEditor) => {\n  const enties = getNodeEntries(editor, {\n    at: [],\n    match: (n) => n.type === BaseImagePlugin.key,\n  });\n\n  return Array.from(enties, (item) => ({\n    id: item[0].id,\n    url: item[0].url,\n  })) as unknown as PreviewItem[];\n};\n\nexport const openImagePreview = (\n  editor: SlateEditor,\n  element: TMediaElement\n) => {\n  const { id, url } = element;\n  const urlList = getUrlList(editor);\n  document.documentElement.style.overflowY = 'hidden';\n  imagePreviewActions.openEditorId(editor.id);\n  imagePreviewActions.currentPreview({ id, url });\n  imagePreviewActions.previewList(urlList);\n};\n","import { useCallback, useEffect, useMemo } from 'react';\n\nimport { isHotkey } from '@udecode/plate-common';\nimport { useEditorRef } from '@udecode/plate-common/react';\n\nimport {\n  imagePreviewActions,\n  useImagePreviewSelectors,\n} from './ImagePreviewStore';\nimport { useZoom } from './useZoom';\n\nexport const useImagePreviewState = ({\n  scrollSpeed,\n}: {\n  scrollSpeed: number;\n}) => {\n  const editor = useEditorRef();\n  const isOpen = useImagePreviewSelectors().isOpen(editor.id);\n  const scale = useImagePreviewSelectors().scale();\n  const translate = useImagePreviewSelectors().translate();\n  const setTranslate = imagePreviewActions.translate;\n  const boundingClientRect = useImagePreviewSelectors().boundingClientRect();\n  const currentPreview = useImagePreviewSelectors().currentPreview();\n  const setCurrentPreView = imagePreviewActions.currentPreview;\n  const previewList = useImagePreviewSelectors().previewList();\n  const isEditingScale = useImagePreviewSelectors().isEditingScale();\n  const setIsEditingScale = imagePreviewActions.isEditingScale;\n\n  return {\n    boundingClientRect,\n    currentPreview,\n    editor,\n    isEditingScale,\n    isOpen,\n    previewList,\n    scale,\n    scrollSpeed,\n    setCurrentPreView,\n    setIsEditingScale,\n    setTranslate,\n    translate,\n  };\n};\n\nexport const useImagePreview = ({\n  boundingClientRect,\n  currentPreview,\n  isOpen,\n  previewList,\n  scale,\n  scrollSpeed,\n  setCurrentPreView,\n  setIsEditingScale,\n  setTranslate,\n  translate,\n}: ReturnType<typeof useImagePreviewState>) => {\n  // zoom in/out and move image\n  useEffect(() => {\n    const wheel = (e: WheelEvent) => {\n      if (scale <= 1) return;\n\n      const { deltaX, deltaY } = e;\n      const { x, y } = translate;\n\n      const { bottom, left, right, top } = boundingClientRect;\n\n      const windowWidth = window.innerWidth;\n      const windowHeight = window.innerHeight;\n\n      let leftOffset = x - deltaX / scrollSpeed;\n      let topOffset = y - deltaY / scrollSpeed;\n\n      // Check horizontal scroll boundaries\n      if (left - deltaX / scrollSpeed > windowWidth / 2 && deltaX < 0) {\n        leftOffset = x;\n      }\n      if (right - deltaX / scrollSpeed < windowWidth / 2 && deltaX > 0) {\n        leftOffset = x;\n      }\n      // Check the vertical scroll boundary\n      if (top - deltaY / scrollSpeed > windowHeight / 2 && deltaY < 0) {\n        topOffset = y;\n      }\n      if (bottom - deltaY / scrollSpeed < windowHeight / 2 && deltaY > 0) {\n        topOffset = y;\n      }\n\n      setTranslate({\n        x: leftOffset,\n        y: topOffset,\n      });\n    };\n\n    if (!isOpen) return document.removeEventListener('wheel', wheel);\n\n    document.addEventListener('wheel', wheel);\n\n    return () => {\n      document.removeEventListener('wheel', wheel);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, translate, scale]);\n\n  const { zoomIn, zoomOut } = useZoom();\n\n  const currentPreviewIndex = useMemo(() => {\n    if (!currentPreview) return null;\n\n    return previewList.findIndex(\n      (item) => item.url === currentPreview.url && item.id === currentPreview.id\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPreview]);\n\n  const onClose = useCallback(() => {\n    imagePreviewActions.close();\n    document.documentElement.style.overflowY = 'scroll';\n  }, []);\n\n  const [prevDisabled, nextDisabled] = useMemo(\n    () => [\n      currentPreviewIndex === 0,\n      currentPreviewIndex === previewList.length - 1,\n    ],\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentPreviewIndex]\n  );\n\n  const [zoomOutDisabled, zoomInDisabled] = useMemo(\n    () => [scale <= 0.5, scale >= 2],\n    [scale]\n  );\n\n  useEffect(() => {\n    const keydown = (e: KeyboardEvent) => {\n      if (isHotkey('escape')(e)) {\n        e.stopPropagation();\n        onClose();\n      }\n    };\n\n    if (!isOpen) return document.removeEventListener('keydown', keydown);\n\n    document.addEventListener('keydown', keydown);\n\n    return () => {\n      document.removeEventListener('keydown', keydown);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n\n  return {\n    closeProps: {\n      onClick: () => onClose(),\n    },\n    currentUrlIndex: currentPreviewIndex,\n    maskLayerProps: {\n      onClick: () => onClose(),\n    },\n    nextDisabled,\n    nextProps: {\n      disabled: nextDisabled,\n      onClick: () => {\n        if (typeof currentPreviewIndex !== 'number') return;\n\n        setCurrentPreView(previewList[currentPreviewIndex + 1]);\n      },\n    },\n    prevDisabled,\n    prevProps: {\n      disabled: prevDisabled,\n      onClick: () => {\n        if (typeof currentPreviewIndex !== 'number') return;\n\n        setCurrentPreView(previewList[currentPreviewIndex - 1]);\n      },\n    },\n    scaleTextProps: {\n      onClick: () => setIsEditingScale(true),\n    },\n    zommOutProps: {\n      disabled: zoomOutDisabled,\n      onClick: () => zoomOut(),\n    },\n    zoomInDisabled,\n    zoomInProps: {\n      disabled: zoomInDisabled,\n      onClick: () => zoomIn(),\n    },\n    zoomOutDisabled,\n  };\n};\n","import { useCallback } from 'react';\n\nimport {\n  imagePreviewActions,\n  useImagePreviewSelectors,\n} from './ImagePreviewStore';\n\nexport const useZoom = () => {\n  const scale = useImagePreviewSelectors().scale();\n  const setScale = imagePreviewActions.scale;\n  const setTranslate = imagePreviewActions.translate;\n\n  const zoomIn = useCallback(() => {\n    if (scale >= 2) return;\n\n    const targets = [0, 0.5, 1, 1.5, 2];\n    const nextScale = targets.find((target) => scale < target);\n\n    nextScale && setScale(nextScale);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scale]);\n\n  const zoomOut = useCallback(() => {\n    if (scale <= 0) return;\n\n    const targets = [0, 0.5, 1, 1.5, 2];\n    const previousScale = [...targets]\n      .reverse()\n      .find((target) => scale > target);\n\n    if (previousScale === 1) setTranslate({ x: 0, y: 0 });\n\n    previousScale && setScale(previousScale);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scale]);\n\n  return { zoomIn, zoomOut };\n};\n","import {\n  createPrimitiveComponent,\n  useEditorRef,\n  useElement,\n} from '@udecode/plate-common/react';\n\nimport type { TMediaElement } from '../../../lib/media';\n\nimport { openImagePreview } from '../openImagePreview';\n\nexport const useImage = () => {\n  const element = useElement<TMediaElement>();\n  const editor = useEditorRef();\n\n  return {\n    props: {\n      draggable: true,\n      src: element.url,\n      onDoubleClickCapture: () => {\n        openImagePreview(editor, element);\n      },\n    },\n  };\n};\n\nexport const Image = createPrimitiveComponent('img')({\n  propsHook: useImage,\n});\n","import React, { useEffect, useMemo } from 'react';\n\nimport { createPrimitiveComponent } from '@udecode/plate-common/react';\n\nimport {\n  imagePreviewActions,\n  useImagePreviewSelectors,\n} from '../ImagePreviewStore';\nimport { useZoom } from '../useZoom';\n\nexport const usePreviewImageState = () => {\n  const currentPreview = useImagePreviewSelectors().currentPreview();\n  const translate = useImagePreviewSelectors().translate();\n  const scale = useImagePreviewSelectors().scale();\n  const imageRef = React.useRef<HTMLImageElement>(null);\n  const setBoundingClientRect = imagePreviewActions.boundingClientRect;\n\n  return {\n    currentPreview,\n    imageRef,\n    scale,\n    setBoundingClientRect,\n    translate,\n  };\n};\n\nexport const usePreviewImage = ({\n  currentPreview,\n  imageRef,\n  scale,\n  setBoundingClientRect,\n  translate,\n}: ReturnType<typeof usePreviewImageState>) => {\n  const isZoomIn = useMemo(() => scale <= 1, [scale]);\n\n  const { zoomIn, zoomOut } = useZoom();\n\n  useEffect(() => {\n    if (scale <= 1) return;\n\n    const boundingClientRect = imageRef.current?.getBoundingClientRect();\n\n    if (!boundingClientRect) return;\n\n    setBoundingClientRect(boundingClientRect);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [translate.x, translate.y, scale]);\n\n  return {\n    props: {\n      draggable: false,\n      ref: imageRef,\n      src: currentPreview?.url,\n      style: {\n        cursor: isZoomIn ? 'zoom-in' : 'zoom-out',\n        transform: `scale(${scale}) translate(${translate.x + 'px'}, ${translate.y + 'px'})`,\n      },\n      onClick: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        e.stopPropagation();\n        isZoomIn ? zoomIn() : zoomOut();\n      },\n    },\n  };\n};\n\nexport const PreviewImage = createPrimitiveComponent('img')({\n  propsHook: usePreviewImage,\n  stateHook: usePreviewImageState,\n});\n","import { useEffect, useRef, useState } from 'react';\n\nimport { isHotkey } from '@udecode/plate-common';\n\nimport {\n  imagePreviewActions,\n  useImagePreviewSelectors,\n} from '../ImagePreviewStore';\n\nexport const useScaleInputState = () => {\n  const scale = useImagePreviewSelectors().scale();\n  const setScale = imagePreviewActions.scale;\n\n  const isEditingScale = useImagePreviewSelectors().isEditingScale();\n  const setIsEditingScale = imagePreviewActions.isEditingScale;\n\n  const [value, setValue] = useState(scale * 100 + '');\n  const inputRef = useRef<HTMLInputElement>();\n\n  return {\n    inputRef,\n    isEditingScale,\n    setIsEditingScale,\n    setScale,\n    setValue,\n    value,\n  };\n};\n\nexport const useScaleInput = ({\n  inputRef,\n  isEditingScale,\n  setIsEditingScale,\n  setScale,\n  setValue,\n  value,\n}: ReturnType<typeof useScaleInputState>) => {\n  useEffect(() => {\n    if (!isEditingScale) return;\n\n    setTimeout(() => {\n      inputRef.current?.focus();\n      inputRef.current?.select();\n    }, 0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isEditingScale]);\n\n  return {\n    props: {\n      value: value,\n      onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n        setValue(e.target.value);\n      },\n      onKeyDown: (e: React.KeyboardEvent<HTMLInputElement>) => {\n        if (isHotkey('enter')(e)) {\n          if (Number(value) <= 50) {\n            setScale(0.5);\n            setIsEditingScale(false);\n\n            return;\n          }\n          if (Number(value) >= 200) {\n            setScale(2);\n            setIsEditingScale(false);\n\n            return;\n          }\n\n          setScale(Number((Number(value) / 100).toFixed(2)));\n          setIsEditingScale(false);\n        }\n      },\n    },\n    ref: inputRef,\n  };\n};\n","import { createAtomStore } from '@udecode/plate-common/react';\n\ninterface MediaStore {\n  showCaption: boolean;\n}\n\nexport const { MediaProvider, mediaStore, useMediaStore } = createAtomStore(\n  {\n    showCaption: false,\n  } as MediaStore,\n  { name: 'media' }\n);\n","import React from 'react';\n\nexport const useMediaControllerState = () => {\n  const [alignOpen, setAlignOpen] = React.useState(false);\n\n  return {\n    alignOpen,\n    setAlignOpen,\n  };\n};\n\nexport const useMediaController = ({\n  setAlignOpen,\n}: ReturnType<typeof useMediaControllerState>) => {\n  return {\n    MediaControllerDropDownMenuProps: {\n      setAlignOpen: setAlignOpen,\n    },\n  };\n};\n\nexport const useMediaControllerDropDownMenu = (props: {\n  openState: {\n    open: boolean;\n    onOpenChange: (_value?: boolean) => void;\n  };\n  setAlignOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}) => {\n  React.useEffect(\n    () => props.setAlignOpen(props.openState.open),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [props.openState.open]\n  );\n};\n","import React from 'react';\n\nimport { useEditorRef, useElement } from '@udecode/plate-common/react';\nimport { useFocused, useReadOnly, useSelected } from 'slate-react';\n\nimport type { TMediaElement } from '../../lib/media/types';\n\nimport { BaseVideoPlugin } from '../../lib';\nimport {\n  type EmbedUrlParser,\n  parseMediaUrl,\n} from '../../lib/media/parseMediaUrl';\nimport { BaseMediaEmbedPlugin, VIDEO_PROVIDERS } from '../../lib/media-embed';\n\nexport const useMediaState = ({\n  urlParsers,\n}: {\n  urlParsers?: EmbedUrlParser[];\n} = {}) => {\n  const editor = useEditorRef();\n  const element = useElement<TMediaElement>();\n  const focused = useFocused();\n  const selected = useSelected();\n  const readOnly = useReadOnly();\n\n  const { id, align, isUpload, name, type, url } = element;\n\n  const embed = React.useMemo(() => {\n    if (\n      !urlParsers ||\n      (type !== editor.getType(BaseVideoPlugin) &&\n        type !== editor.getType(BaseMediaEmbedPlugin))\n    )\n      return;\n\n    return parseMediaUrl(url, { urlParsers });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [urlParsers, url]);\n\n  const isTweet = embed?.provider === 'twitter';\n  const isVideo = !!embed?.provider && VIDEO_PROVIDERS.includes(embed.provider);\n  const isYoutube = embed?.provider === 'youtube';\n\n  return {\n    id,\n    align,\n    embed,\n    focused,\n    isTweet,\n    isUpload,\n    isVideo,\n    isYoutube,\n    name,\n    readOnly,\n    selected,\n    unsafeUrl: url,\n  };\n};\n","import { useEditorRef } from '@udecode/plate-common/react';\n\nimport { insertMedia } from '../../lib/media/insertMedia';\n\nexport const useMediaToolbarButton = ({\n  nodeType,\n}: { nodeType?: string } = {}) => {\n  const editor = useEditorRef();\n\n  return {\n    props: {\n      onClick: async () => {\n        await insertMedia(editor, { type: nodeType });\n      },\n      onMouseDown: (e: React.MouseEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n      },\n    },\n  };\n};\n","import React from 'react';\n\nimport {\n  createPrimitiveComponent,\n  useElement,\n} from '@udecode/plate-common/react';\n\nimport type { TMediaElement } from '../../../lib/media/types';\n\nimport { floatingMediaActions } from './FloatingMediaStore';\n\nexport const useFloatingMediaEditButton = () => {\n  const element = useElement<TMediaElement>();\n\n  return {\n    props: {\n      onClick: React.useCallback(() => {\n        floatingMediaActions.url(element.url);\n        floatingMediaActions.isEditing(true);\n      }, [element.url]),\n    },\n  };\n};\n\nexport const FloatingMediaEditButton = createPrimitiveComponent('button')({\n  propsHook: useFloatingMediaEditButton,\n});\n","import { createZustandStore } from '@udecode/plate-common';\n\nexport const FloatingMediaStore = createZustandStore('floatingMedia')({\n  isEditing: false,\n  url: '',\n}).extendActions((set) => ({\n  reset: () => {\n    set.url('');\n    set.isEditing(false);\n  },\n}));\n\nexport const floatingMediaActions = FloatingMediaStore.set;\n\nexport const floatingMediaSelectors = FloatingMediaStore.get;\n\nexport const useFloatingMediaSelectors = () => FloatingMediaStore.use;\n","import React from 'react';\n\nimport type { WithRequiredKey } from '@udecode/plate-common';\n\nimport {\n  createPrimitiveComponent,\n  focusEditor,\n  useEditorRef,\n  useElement,\n  useHotkeys,\n} from '@udecode/plate-common/react';\n\nimport type { TMediaElement } from '../../../lib/media/types';\n\nimport {\n  floatingMediaActions,\n  floatingMediaSelectors,\n} from './FloatingMediaStore';\nimport { submitFloatingMedia } from './submitFloatingMedia';\n\nexport const useFloatingMediaUrlInputState = ({\n  plugin,\n}: {\n  plugin: WithRequiredKey;\n}) => {\n  const editor = useEditorRef();\n  const element = useElement<TMediaElement>();\n\n  useHotkeys(\n    'enter',\n    (e) => {\n      if (submitFloatingMedia(editor, { element, plugin })) {\n        e.preventDefault();\n      }\n    },\n    {\n      enableOnFormTags: ['INPUT'],\n    },\n    []\n  );\n\n  useHotkeys(\n    'escape',\n    () => {\n      if (floatingMediaSelectors.isEditing()) {\n        floatingMediaActions.reset();\n        focusEditor(editor, editor.selection!);\n      }\n    },\n    {\n      enableOnContentEditable: true,\n      enableOnFormTags: ['INPUT'],\n    },\n    []\n  );\n\n  return {\n    defaultValue: floatingMediaSelectors.url(),\n  };\n};\n\nexport const useFloatingMediaUrlInput = ({\n  defaultValue,\n}: ReturnType<typeof useFloatingMediaUrlInputState>) => {\n  const onChange: React.ChangeEventHandler<HTMLInputElement> =\n    React.useCallback((e) => {\n      floatingMediaActions.url(e.target.value);\n    }, []);\n\n  return {\n    props: {\n      autoFocus: true,\n      defaultValue,\n      onChange,\n    },\n  };\n};\n\nexport const FloatingMediaUrlInput = createPrimitiveComponent('input')({\n  propsHook: useFloatingMediaUrlInput,\n  stateHook: useFloatingMediaUrlInputState,\n});\n","import {\n  type PluginConfig,\n  type SlateEditor,\n  type WithRequiredKey,\n  isUrl,\n  setNodes,\n} from '@udecode/plate-common';\nimport { focusEditor } from '@udecode/plate-common/react';\n\nimport type {\n  MediaPluginOptions,\n  TMediaElement,\n} from '../../../lib/media/types';\n\nimport {\n  floatingMediaActions,\n  floatingMediaSelectors,\n} from './FloatingMediaStore';\n\nexport const submitFloatingMedia = (\n  editor: SlateEditor,\n  {\n    element,\n    plugin,\n  }: {\n    element: TMediaElement;\n    plugin: WithRequiredKey;\n  }\n) => {\n  let url = floatingMediaSelectors.url();\n\n  if (url === element.url) {\n    floatingMediaActions.reset();\n\n    return true;\n  }\n\n  const { isUrl: _isUrl = isUrl, transformUrl } =\n    editor.getOptions<PluginConfig<any, MediaPluginOptions>>(plugin);\n  const isValid = _isUrl(url);\n\n  if (!isValid) return;\n  if (transformUrl) {\n    url = transformUrl(url);\n  }\n\n  setNodes<TMediaElement>(editor, {\n    url,\n  });\n\n  floatingMediaActions.reset();\n\n  focusEditor(editor, editor.selection!);\n\n  return true;\n};\n","import { FloatingMediaEditButton } from './FloatingMediaEditButton';\nimport { FloatingMediaUrlInput } from './FloatingMediaUrlInput';\n\nexport const FloatingMedia = {\n  EditButton: FloatingMediaEditButton,\n  UrlInput: FloatingMediaUrlInput,\n};\n","import { isHotkey } from '@udecode/plate-common';\nimport { blurEditor, toPlatePlugin } from '@udecode/plate-common/react';\n\nimport { BasePlaceholderPlugin } from '../../lib/placeholder/BasePlaceholderPlugin';\n\nexport const PlaceholderPlugin = toPlatePlugin(BasePlaceholderPlugin, {\n  handlers: {\n    onKeyDown: ({ editor, event }) => {\n      if (isHotkey('escape')(event)) {\n        blurEditor(editor);\n      }\n    },\n  },\n});\n","import { createAtomStore } from '@udecode/plate-common/react';\n\ntype Progresses = Record<string, number>;\ninterface PlaceholderStore {\n  isUploading: boolean;\n  progresses: Progresses;\n  updatedFiles: File[];\n}\n\nexport const { PlaceholderProvider, placeholderStore, usePlaceholderStore } =\n  createAtomStore(\n    {\n      isUploading: false,\n      progresses: {},\n      updatedFiles: [],\n    } as PlaceholderStore,\n    { name: 'placeholder' }\n  );\n","import { useEditorRef, useElement } from '@udecode/plate-common/react';\nimport { useFocused, useReadOnly, useSelected } from 'slate-react';\n\nimport type { TPlaceholderElement } from '../../lib/placeholder/types';\n\nimport { BasePlaceholderPlugin } from '../../lib/placeholder/BasePlaceholderPlugin';\nimport { usePlaceholderStore } from './placeholderStore';\n\nexport const usePlaceholderElementState = () => {\n  const element = useElement();\n  const editor = useEditorRef();\n  const focused = useFocused();\n  const readOnly = useReadOnly();\n  const selected = useSelected();\n\n  const progresses = usePlaceholderStore().get.progresses();\n  const isUploading = usePlaceholderStore().get.isUploading();\n  const updatedFiles = usePlaceholderStore().get.updatedFiles();\n\n  const { mediaType } = useElement<TPlaceholderElement>(\n    BasePlaceholderPlugin.key\n  );\n\n  const progressing = updatedFiles.length > 0 && isUploading;\n\n  return {\n    editor,\n    element,\n    focused,\n    isUploading,\n    mediaType,\n    progresses,\n    progressing,\n    readOnly,\n    selected,\n    updatedFiles,\n  };\n};\n","import { isSelectionExpanded } from '@udecode/plate-common';\nimport {\n  useEditorRef,\n  useEditorSelector,\n  useElement,\n} from '@udecode/plate-common/react';\nimport { useFocused, useReadOnly, useSelected } from 'slate-react';\n\nimport type { TPlaceholderElement } from '../../lib/placeholder/types';\n\nimport { BasePlaceholderPlugin } from '../../lib/placeholder/BasePlaceholderPlugin';\nimport { usePlaceholderStore } from './placeholderStore';\n\nexport const usePlaceholderPopoverState = () => {\n  const editor = useEditorRef();\n  const readOnly = useReadOnly();\n  const selected = useSelected();\n  const focused = useFocused();\n\n  const selectionCollapsed = useEditorSelector(\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    (editor) => !isSelectionExpanded(editor),\n    []\n  );\n\n  const element = useElement<TPlaceholderElement>(BasePlaceholderPlugin.key);\n  const { id, mediaType } = element;\n\n  const setProgresses = usePlaceholderStore().set.progresses();\n  const setIsUploading = usePlaceholderStore().set.isUploading();\n  const setUpdatedFiles = usePlaceholderStore().set.updatedFiles();\n\n  return {\n    id,\n    editor,\n    element,\n    focused,\n    mediaType,\n    readOnly,\n    selected,\n    selectionCollapsed,\n    setIsUploading,\n    setProgresses,\n    setUpdatedFiles,\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,qBAAqB;;;ACA9B,SAAS,yBAAyB;AAM3B,IAAM,kBAAkB,kBAAkB;AAAA,EAC/C,KAAK;AAAA,EACL,MAAM,EAAE,WAAW,MAAM,QAAQ,KAAK;AACxC,CAAC;;;ACTD,SAAS,qBAAAA,0BAAyB;AAM3B,IAAM,iBAAiBA,mBAAkB;AAAA,EAC9C,KAAK;AAAA,EACL,MAAM,EAAE,WAAW,MAAM,QAAQ,KAAK;AACxC,CAAC;;;ACTD,SAAS,qBAAAC,0BAAyB;AAM3B,IAAM,kBAAkBA,mBAAkB;AAAA,EAC/C,KAAK;AAAA,EACL,MAAM;AAAA,IACJ,4BAA4B,CAAC,SAAS,QAAQ;AAAA,IAC9C,WAAW;AAAA,IACX,QAAQ;AAAA,EACV;AACF,CAAC;;;ACbD,SAA4B,0BAA0B;;;ACAtD;AAAA,EAGE;AAAA,OACK;AAIA,IAAM,cAAc,CACzB,QACA,KACA,UAAiC,CAAC,MAC/B;AACH,QAAM,OAAO,EAAE,MAAM,GAAG;AACxB,QAAM,QAAuB;AAAA,IAC3B,UAAU,CAAC,IAAI;AAAA,IACf,MAAM,OAAO,QAAQ,eAAe;AAAA,IACpC;AAAA,EACF;AACA,cAA2B,QAAQ,OAAO;AAAA,IACxC,WAAW;AAAA,KACP,QACL;AACH;;;ACvBA,SAAS,aAAa;AAEtB,IAAM,kBAAkB,oBAAI,IAAI;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,CAAC;AAEM,IAAM,aAAa,CAAC,QAAgB;AACzC,MAAI,CAAC,MAAM,GAAG,EAAG,QAAO;AAExB,QAAM,MAAM,IAAI,IAAI,GAAG,EAAE,SAAS,MAAM,GAAG,EAAE,IAAI;AAEjD,SAAO,gBAAgB,IAAI,GAAG;AAChC;;;AC3HO,IAAM,iBAA4C,CAAC;AAAA,EACxD;AAAA,EACA;AACF,MAAM;AACJ,QAAM,EAAE,WAAW,IAAI;AAEvB,SAAO,aAAa,CAAC,iBAA+B;AAClD,QAAI,WAAW,EAAE,oBAAoB;AACnC,aAAO,WAAW,YAAY;AAAA,IAChC;AAEA,UAAM,OAAO,aAAa,QAAQ,YAAY;AAE9C,QAAI,WAAW,IAAI,GAAG;AACpB,kBAAY,QAAQ,IAAI;AAExB;AAAA,IACF;AAEA,eAAW,YAAY;AAAA,EACzB;AAEA,SAAO;AACT;;;AC/BA;AAAA,EAEE;AAAA,EACA;AAAA,OACK;AAUA,IAAM,kBAA6C,CAAC;AAAA,EACzD;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,QAAM,EAAE,WAAW,IAAI;AAEvB,SAAO,aAAa,CAAC,iBAA+B;AAClD,QAAI,WAAW,EAAE,qBAAqB;AACpC,aAAO,WAAW,YAAY;AAAA,IAChC;AAEA,UAAM,OAAO,aAAa,QAAQ,YAAY;AAC9C,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI,CAAC,QAAQ,SAAS,MAAM,SAAS,GAAG;AACtC,YAAM,kBAAkB,mBAAmB,QAAQ,MAAM;AAEzD,UACE,CAAC,oBAAoB,QAAQ,iBAAiB;AAAA,QAC5C,MAAM;AAAA,QACN;AAAA,MACF,CAAC,GACD;AACA,eAAO,WAAW,YAAY;AAAA,MAChC;AAEA,iBAAW,QAAQ,OAAO;AACxB,cAAM,SAAS,IAAI,WAAW;AAC9B,cAAM,CAAC,IAAI,IAAI,KAAK,KAAK,MAAM,GAAG;AAElC,YAAI,SAAS,SAAS;AACpB,iBAAO,iBAAiB,QAAQ,YAAY;AAC1C,gBAAI,CAAC,OAAO,QAAQ;AAClB;AAAA,YACF;AAEA,kBAAM,cAAc,WAAW,EAAE;AAEjC,kBAAM,cAAc,cAChB,MAAM,YAAY,OAAO,MAAM,IAC/B,OAAO;AAEX,wBAAY,QAAQ,WAAW;AAAA,UACjC,CAAC;AAED,iBAAO,cAAc,IAAI;AAAA,QAC3B;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW,YAAY;AAAA,IACzB;AAAA,EACF;AAEA,SAAO;AACT;;;AC1DO,IAAM,YAAuC,CAAC,OAAuB;AAAvB,eAAE,SAXvD,IAWqD,IAAa,gBAAb,IAAa,CAAX;AACrD,WAAS,gBAAgB,iBAAE,UAAW,IAAK;AAC3C,WAAS,eAAe,iBAAE,UAAW,IAAK;AAE1C,SAAO;AACT;;;ALaO,IAAM,kBAAkB,mBAAgC;AAAA,EAC7D,KAAK;AAAA,EACL,cAAc;AAAA,EACd,MAAM;AAAA,IACJ,4BAA4B,CAAC,OAAO,SAAS,QAAQ;AAAA,IACrD,WAAW;AAAA,IACX,QAAQ;AAAA,EACV;AACF,CAAC,EAAE,OAAO,CAAC,EAAE,OAAO,OAAO;AAAA,EACzB,SAAS;AAAA,IACP,MAAM;AAAA,MACJ,cAAc;AAAA,QACZ,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,MAAM,OAAO,KAAK;AAAA,UAClB,KAAK,QAAQ,aAAa,KAAK;AAAA,QACjC;AAAA,QACA,OAAO;AAAA,UACL;AAAA,YACE,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,EAAE;;;AM7BK,IAAM,cAAc,OACzB,QACA,KAI2B,CAAC,MACzB;AALH,eACE;AAAA;AAAA,IACA,OAAO,OAAO,QAAQ,eAAe;AAAA,EA5BzC,IA0BE,IAGK,oBAHL,IAGK;AAAA,IAFH;AAAA,IACA;AAAA;AAIF,QAAM,MAAM,SACR,MAAM,OAAO,IACb,OAAO;AAAA,IACL,wBACE,SAAS,gBAAgB,MACrB,gBAAgB,MAChB,qBAAqB,GAC3B;AAAA,EACF;AAEJ,MAAI,CAAC,IAAK;AACV,MAAI,SAAS,OAAO,QAAQ,eAAe,GAAG;AAC5C,gBAAY,QAAQ,KAAK,OAAO;AAAA,EAClC,OAAO;AACL,qBAAiB,QAAQ,EAAE,IAAI,GAAG,OAAO;AAAA,EAC3C;AACF;;;ACvCA,IAAM,mBAAmB,oBAAI,IAAI,CAAC,SAAS,QAAQ,CAAC;AAE7C,IAAM,gBAAgB,CAC3B,KACA;AAAA,EACE;AACF,MAG6B;AAC7B,QAAM,SAAS,MAAM;AACnB,eAAW,UAAU,YAAY;AAC/B,YAAM,OAAO,OAAO,GAAG;AAEvB,UAAI,MAAM;AACR,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF,GAAG;AAGH,MAAI,+BAAO,KAAK;AACd,QAAI;AACF,YAAM,EAAE,SAAS,IAAI,IAAI,IAAI,MAAM,GAAG;AAEtC,UAAI,CAAC,iBAAiB,IAAI,QAAQ,GAAG;AACnC,eAAO;AAAA,MACT;AAAA,IACF,SAAQ;AAEN,cAAQ,KAAK,0BAA0B,MAAM,GAAG;AAEhD,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;;;AC9CA,SAA4B,sBAAAC,2BAA0B;;;ACA/C,IAAM,iBAAiB,CAAC,QAAgB;AAA/C;AAEE,MAAI,CAAC,IAAI,WAAW,MAAM,GAAG;AAC3B,UAAM,gBAAgB;AACtB,UAAM,mBAAmB;AAEzB,UAAM,OAAM,mBAAc,KAAK,GAAG,MAAtB,mBAA0B;AACtC,UAAM,gBAAe,gCAAK,MAAM,sBAAX,mBAA+B;AAEpD,QAAI,cAAc;AAChB,YAAM;AAAA,IACR;AAAA,EACF;AAEA,SAAO;AACT;;;ADDO,IAAM,uBAAuBC,oBAAqC;AAAA,EACvE,KAAK;AAAA,EACL,MAAM,EAAE,WAAW,MAAM,QAAQ,KAAK;AAAA,EACtC,SAAS;AAAA,IACP,cAAc;AAAA,EAChB;AACF,CAAC,EAAE,OAAO,CAAC,EAAE,KAAK,OAAO;AAAA,EACvB,SAAS;AAAA,IACP,MAAM;AAAA,MACJ,cAAc;AAAA,QACZ,OAAO,CAAC,EAAE,QAAQ,MAAM;AACtB,gBAAM,MAAM,QAAQ,aAAa,KAAK;AAEtC,cAAI,KAAK;AACP,mBAAO;AAAA,cACL;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,QACA,OAAO;AAAA,UACL;AAAA,YACE,eAAe;AAAA,UACjB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,EAAE;;;AE1CF,SAAS,SAAAC,cAAa;AACtB,OAAO,iBAAiB;AAUjB,IAAM,kBAAkB;AAAA,EAC7B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;;;ACjBA;AAAA,EAGE;AAAA,EACA,eAAAC;AAAA,OACK;AAOA,IAAM,mBAAmB,CAC9B,QACA,EAAE,MAAM,GAAG,GACX,UAAiC,CAAC,MACzB;AACT,MAAI,CAAC,OAAO,UAAW;AAEvB,QAAM,uBAAuB,cAAc,QAAQ,OAAO,SAAS;AAEnE,MAAI,CAAC,qBAAsB;AAE3B,QAAM,CAAC,EAAE,IAAI,IAAI;AACjB,EAAAC;AAAA,IACE;AAAA,IACA;AAAA,MACE,UAAU,CAAC,EAAE,MAAM,GAAG,CAAC;AAAA,MACvB,MAAM,OAAO,QAAQ,oBAAoB;AAAA,MACzC;AAAA,IACF;AAAA,IACA;AAAA,MACE,IAAI;AAAA,MACJ,WAAW;AAAA,OACP;AAAA,EAER;AACF;;;ACrCA,SAA4B,sBAAAC,2BAA0B;AAM/C,IAAM,wBAAwBA,oBAAsC;AAAA,EACzE,KAAK;AAAA,EACL,MAAM,EAAE,WAAW,MAAM,QAAQ,KAAK;AACxC,CAAC;;;AhBCM,IAAM,cAAc,cAAc,eAAe;AAEjD,IAAM,mBAAmB,cAAc,oBAAoB;AAE3D,IAAM,cAAc,cAAc,eAAe;AAEjD,IAAM,aAAa,cAAc,cAAc;AAE/C,IAAM,cAAc,cAAc,eAAe;;;AiBlBxD,SAAS,0BAA0B;AAO5B,IAAM,oBAAoB,mBAAmB,cAAc,EAAE;AAAA,EAClE,oBAAoB,CAAC;AAAA,EACrB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,cAAc;AAAA,EACd,aAAa,CAAC;AAAA,EACd,OAAO;AAAA,EACP,WAAW,EAAE,GAAG,GAAG,GAAG,EAAE;AAC1B,CAAC,EACE,cAAc,CAAC,SAAS;AAAA,EACvB,OAAO,MAAM;AACX,QAAI,eAAe,IAAI;AACvB,QAAI,YAAY,CAAC,CAAC;AAClB,QAAI,aAAa,IAAI;AACrB,QAAI,MAAM,CAAC;AACX,QAAI,UAAU,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;AAC5B,QAAI,eAAe,KAAK;AAAA,EAC1B;AACF,EAAE,EACD,gBAAgB,CAAC,WAAW;AAAA,EAC3B,QAAQ,CAAC,aAAqB,MAAM,iBAAiB;AACvD,EAAE;AAEG,IAAM,sBAAsB,kBAAkB;AAE9C,IAAM,wBAAwB,kBAAkB;AAEhD,IAAM,2BAA2B,MAAM,kBAAkB;;;AClChE,SAA2B,sBAAsB;AAOjD,IAAM,aAAa,CAAC,WAAwB;AAC1C,QAAM,SAAS,eAAe,QAAQ;AAAA,IACpC,IAAI,CAAC;AAAA,IACL,OAAO,CAAC,MAAM,EAAE,SAAS,gBAAgB;AAAA,EAC3C,CAAC;AAED,SAAO,MAAM,KAAK,QAAQ,CAAC,UAAU;AAAA,IACnC,IAAI,KAAK,CAAC,EAAE;AAAA,IACZ,KAAK,KAAK,CAAC,EAAE;AAAA,EACf,EAAE;AACJ;AAEO,IAAM,mBAAmB,CAC9B,QACA,YACG;AACH,QAAM,EAAE,IAAI,IAAI,IAAI;AACpB,QAAM,UAAU,WAAW,MAAM;AACjC,WAAS,gBAAgB,MAAM,YAAY;AAC3C,sBAAoB,aAAa,OAAO,EAAE;AAC1C,sBAAoB,eAAe,EAAE,IAAI,IAAI,CAAC;AAC9C,sBAAoB,YAAY,OAAO;AACzC;;;AC7BA,SAAS,eAAAC,cAAa,WAAW,eAAe;AAEhD,SAAS,gBAAgB;AACzB,SAAS,oBAAoB;;;ACH7B,SAAS,mBAAmB;AAOrB,IAAM,UAAU,MAAM;AAC3B,QAAM,QAAQ,yBAAyB,EAAE,MAAM;AAC/C,QAAM,WAAW,oBAAoB;AACrC,QAAM,eAAe,oBAAoB;AAEzC,QAAM,SAAS,YAAY,MAAM;AAC/B,QAAI,SAAS,EAAG;AAEhB,UAAM,UAAU,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC;AAClC,UAAM,YAAY,QAAQ,KAAK,CAAC,WAAW,QAAQ,MAAM;AAEzD,iBAAa,SAAS,SAAS;AAAA,EAEjC,GAAG,CAAC,KAAK,CAAC;AAEV,QAAM,UAAU,YAAY,MAAM;AAChC,QAAI,SAAS,EAAG;AAEhB,UAAM,UAAU,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC;AAClC,UAAM,gBAAgB,CAAC,GAAG,OAAO,EAC9B,QAAQ,EACR,KAAK,CAAC,WAAW,QAAQ,MAAM;AAElC,QAAI,kBAAkB,EAAG,cAAa,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC;AAEpD,qBAAiB,SAAS,aAAa;AAAA,EAEzC,GAAG,CAAC,KAAK,CAAC;AAEV,SAAO,EAAE,QAAQ,QAAQ;AAC3B;;;AD1BO,IAAM,uBAAuB,CAAC;AAAA,EACnC;AACF,MAEM;AACJ,QAAM,SAAS,aAAa;AAC5B,QAAM,SAAS,yBAAyB,EAAE,OAAO,OAAO,EAAE;AAC1D,QAAM,QAAQ,yBAAyB,EAAE,MAAM;AAC/C,QAAM,YAAY,yBAAyB,EAAE,UAAU;AACvD,QAAM,eAAe,oBAAoB;AACzC,QAAM,qBAAqB,yBAAyB,EAAE,mBAAmB;AACzE,QAAM,iBAAiB,yBAAyB,EAAE,eAAe;AACjE,QAAM,oBAAoB,oBAAoB;AAC9C,QAAM,cAAc,yBAAyB,EAAE,YAAY;AAC3D,QAAM,iBAAiB,yBAAyB,EAAE,eAAe;AACjE,QAAM,oBAAoB,oBAAoB;AAE9C,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEO,IAAM,kBAAkB,CAAC;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAA+C;AAE7C,YAAU,MAAM;AACd,UAAM,QAAQ,CAAC,MAAkB;AAC/B,UAAI,SAAS,EAAG;AAEhB,YAAM,EAAE,QAAQ,OAAO,IAAI;AAC3B,YAAM,EAAE,GAAG,EAAE,IAAI;AAEjB,YAAM,EAAE,QAAQ,MAAM,OAAO,IAAI,IAAI;AAErC,YAAM,cAAc,OAAO;AAC3B,YAAM,eAAe,OAAO;AAE5B,UAAI,aAAa,IAAI,SAAS;AAC9B,UAAI,YAAY,IAAI,SAAS;AAG7B,UAAI,OAAO,SAAS,cAAc,cAAc,KAAK,SAAS,GAAG;AAC/D,qBAAa;AAAA,MACf;AACA,UAAI,QAAQ,SAAS,cAAc,cAAc,KAAK,SAAS,GAAG;AAChE,qBAAa;AAAA,MACf;AAEA,UAAI,MAAM,SAAS,cAAc,eAAe,KAAK,SAAS,GAAG;AAC/D,oBAAY;AAAA,MACd;AACA,UAAI,SAAS,SAAS,cAAc,eAAe,KAAK,SAAS,GAAG;AAClE,oBAAY;AAAA,MACd;AAEA,mBAAa;AAAA,QACX,GAAG;AAAA,QACH,GAAG;AAAA,MACL,CAAC;AAAA,IACH;AAEA,QAAI,CAAC,OAAQ,QAAO,SAAS,oBAAoB,SAAS,KAAK;AAE/D,aAAS,iBAAiB,SAAS,KAAK;AAExC,WAAO,MAAM;AACX,eAAS,oBAAoB,SAAS,KAAK;AAAA,IAC7C;AAAA,EAEF,GAAG,CAAC,QAAQ,WAAW,KAAK,CAAC;AAE7B,QAAM,EAAE,QAAQ,QAAQ,IAAI,QAAQ;AAEpC,QAAM,sBAAsB,QAAQ,MAAM;AACxC,QAAI,CAAC,eAAgB,QAAO;AAE5B,WAAO,YAAY;AAAA,MACjB,CAAC,SAAS,KAAK,QAAQ,eAAe,OAAO,KAAK,OAAO,eAAe;AAAA,IAC1E;AAAA,EAEF,GAAG,CAAC,cAAc,CAAC;AAEnB,QAAM,UAAUC,aAAY,MAAM;AAChC,wBAAoB,MAAM;AAC1B,aAAS,gBAAgB,MAAM,YAAY;AAAA,EAC7C,GAAG,CAAC,CAAC;AAEL,QAAM,CAAC,cAAc,YAAY,IAAI;AAAA,IACnC,MAAM;AAAA,MACJ,wBAAwB;AAAA,MACxB,wBAAwB,YAAY,SAAS;AAAA,IAC/C;AAAA;AAAA,IAEA,CAAC,mBAAmB;AAAA,EACtB;AAEA,QAAM,CAAC,iBAAiB,cAAc,IAAI;AAAA,IACxC,MAAM,CAAC,SAAS,KAAK,SAAS,CAAC;AAAA,IAC/B,CAAC,KAAK;AAAA,EACR;AAEA,YAAU,MAAM;AACd,UAAM,UAAU,CAAC,MAAqB;AACpC,UAAI,SAAS,QAAQ,EAAE,CAAC,GAAG;AACzB,UAAE,gBAAgB;AAClB,gBAAQ;AAAA,MACV;AAAA,IACF;AAEA,QAAI,CAAC,OAAQ,QAAO,SAAS,oBAAoB,WAAW,OAAO;AAEnE,aAAS,iBAAiB,WAAW,OAAO;AAE5C,WAAO,MAAM;AACX,eAAS,oBAAoB,WAAW,OAAO;AAAA,IACjD;AAAA,EAEF,GAAG,CAAC,MAAM,CAAC;AAEX,SAAO;AAAA,IACL,YAAY;AAAA,MACV,SAAS,MAAM,QAAQ;AAAA,IACzB;AAAA,IACA,iBAAiB;AAAA,IACjB,gBAAgB;AAAA,MACd,SAAS,MAAM,QAAQ;AAAA,IACzB;AAAA,IACA;AAAA,IACA,WAAW;AAAA,MACT,UAAU;AAAA,MACV,SAAS,MAAM;AACb,YAAI,OAAO,wBAAwB,SAAU;AAE7C,0BAAkB,YAAY,sBAAsB,CAAC,CAAC;AAAA,MACxD;AAAA,IACF;AAAA,IACA;AAAA,IACA,WAAW;AAAA,MACT,UAAU;AAAA,MACV,SAAS,MAAM;AACb,YAAI,OAAO,wBAAwB,SAAU;AAE7C,0BAAkB,YAAY,sBAAsB,CAAC,CAAC;AAAA,MACxD;AAAA,IACF;AAAA,IACA,gBAAgB;AAAA,MACd,SAAS,MAAM,kBAAkB,IAAI;AAAA,IACvC;AAAA,IACA,cAAc;AAAA,MACZ,UAAU;AAAA,MACV,SAAS,MAAM,QAAQ;AAAA,IACzB;AAAA,IACA;AAAA,IACA,aAAa;AAAA,MACX,UAAU;AAAA,MACV,SAAS,MAAM,OAAO;AAAA,IACxB;AAAA,IACA;AAAA,EACF;AACF;;;AE/LA;AAAA,EACE;AAAA,EACA,gBAAAC;AAAA,EACA;AAAA,OACK;AAMA,IAAM,WAAW,MAAM;AAC5B,QAAM,UAAU,WAA0B;AAC1C,QAAM,SAASC,cAAa;AAE5B,SAAO;AAAA,IACL,OAAO;AAAA,MACL,WAAW;AAAA,MACX,KAAK,QAAQ;AAAA,MACb,sBAAsB,MAAM;AAC1B,yBAAiB,QAAQ,OAAO;AAAA,MAClC;AAAA,IACF;AAAA,EACF;AACF;AAEO,IAAM,QAAQ,yBAAyB,KAAK,EAAE;AAAA,EACnD,WAAW;AACb,CAAC;;;AC3BD,OAAO,SAAS,aAAAC,YAAW,WAAAC,gBAAe;AAE1C,SAAS,4BAAAC,iCAAgC;AAQlC,IAAM,uBAAuB,MAAM;AACxC,QAAM,iBAAiB,yBAAyB,EAAE,eAAe;AACjE,QAAM,YAAY,yBAAyB,EAAE,UAAU;AACvD,QAAM,QAAQ,yBAAyB,EAAE,MAAM;AAC/C,QAAM,WAAW,MAAM,OAAyB,IAAI;AACpD,QAAM,wBAAwB,oBAAoB;AAElD,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEO,IAAM,kBAAkB,CAAC;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAA+C;AAC7C,QAAM,WAAWC,SAAQ,MAAM,SAAS,GAAG,CAAC,KAAK,CAAC;AAElD,QAAM,EAAE,QAAQ,QAAQ,IAAI,QAAQ;AAEpC,EAAAC,WAAU,MAAM;AArClB;AAsCI,QAAI,SAAS,EAAG;AAEhB,UAAM,sBAAqB,cAAS,YAAT,mBAAkB;AAE7C,QAAI,CAAC,mBAAoB;AAEzB,0BAAsB,kBAAkB;AAAA,EAG1C,GAAG,CAAC,UAAU,GAAG,UAAU,GAAG,KAAK,CAAC;AAEpC,SAAO;AAAA,IACL,OAAO;AAAA,MACL,WAAW;AAAA,MACX,KAAK;AAAA,MACL,KAAK,iDAAgB;AAAA,MACrB,OAAO;AAAA,QACL,QAAQ,WAAW,YAAY;AAAA,QAC/B,WAAW,SAAS,KAAK,eAAe,UAAU,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI;AAAA,MACnF;AAAA,MACA,SAAS,CAAC,MAAuD;AAC/D,UAAE,gBAAgB;AAClB,mBAAW,OAAO,IAAI,QAAQ;AAAA,MAChC;AAAA,IACF;AAAA,EACF;AACF;AAEO,IAAM,eAAeC,0BAAyB,KAAK,EAAE;AAAA,EAC1D,WAAW;AAAA,EACX,WAAW;AACb,CAAC;;;ACrED,SAAS,aAAAC,YAAW,QAAQ,gBAAgB;AAE5C,SAAS,YAAAC,iBAAgB;AAOlB,IAAM,qBAAqB,MAAM;AACtC,QAAM,QAAQ,yBAAyB,EAAE,MAAM;AAC/C,QAAM,WAAW,oBAAoB;AAErC,QAAM,iBAAiB,yBAAyB,EAAE,eAAe;AACjE,QAAM,oBAAoB,oBAAoB;AAE9C,QAAM,CAAC,OAAO,QAAQ,IAAI,SAAS,QAAQ,MAAM,EAAE;AACnD,QAAM,WAAW,OAAyB;AAE1C,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEO,IAAM,gBAAgB,CAAC;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAA6C;AAC3C,EAAAC,WAAU,MAAM;AACd,QAAI,CAAC,eAAgB;AAErB,eAAW,MAAM;AAxCrB;AAyCM,qBAAS,YAAT,mBAAkB;AAClB,qBAAS,YAAT,mBAAkB;AAAA,IACpB,GAAG,CAAC;AAAA,EAEN,GAAG,CAAC,cAAc,CAAC;AAEnB,SAAO;AAAA,IACL,OAAO;AAAA,MACL;AAAA,MACA,UAAU,CAAC,MAA2C;AACpD,iBAAS,EAAE,OAAO,KAAK;AAAA,MACzB;AAAA,MACA,WAAW,CAAC,MAA6C;AACvD,YAAIC,UAAS,OAAO,EAAE,CAAC,GAAG;AACxB,cAAI,OAAO,KAAK,KAAK,IAAI;AACvB,qBAAS,GAAG;AACZ,8BAAkB,KAAK;AAEvB;AAAA,UACF;AACA,cAAI,OAAO,KAAK,KAAK,KAAK;AACxB,qBAAS,CAAC;AACV,8BAAkB,KAAK;AAEvB;AAAA,UACF;AAEA,mBAAS,QAAQ,OAAO,KAAK,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;AACjD,4BAAkB,KAAK;AAAA,QACzB;AAAA,MACF;AAAA,IACF;AAAA,IACA,KAAK;AAAA,EACP;AACF;;;AC3EA,SAAS,uBAAuB;AAMzB,IAAM,EAAE,eAAe,YAAY,cAAc,IAAI;AAAA,EAC1D;AAAA,IACE,aAAa;AAAA,EACf;AAAA,EACA,EAAE,MAAM,QAAQ;AAClB;;;ACXA,OAAOC,YAAW;AAEX,IAAM,0BAA0B,MAAM;AAC3C,QAAM,CAAC,WAAW,YAAY,IAAIA,OAAM,SAAS,KAAK;AAEtD,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;AAEO,IAAM,qBAAqB,CAAC;AAAA,EACjC;AACF,MAAkD;AAChD,SAAO;AAAA,IACL,kCAAkC;AAAA,MAChC;AAAA,IACF;AAAA,EACF;AACF;AAEO,IAAM,iCAAiC,CAAC,UAMzC;AACJ,EAAAA,OAAM;AAAA,IACJ,MAAM,MAAM,aAAa,MAAM,UAAU,IAAI;AAAA;AAAA,IAE7C,CAAC,MAAM,UAAU,IAAI;AAAA,EACvB;AACF;;;ACjCA,OAAOC,YAAW;AAElB,SAAS,gBAAAC,eAAc,cAAAC,mBAAkB;AACzC,SAAS,YAAY,aAAa,mBAAmB;AAW9C,IAAM,gBAAgB,CAAC;AAAA,EAC5B;AACF,IAEI,CAAC,MAAM;AACT,QAAM,SAASC,cAAa;AAC5B,QAAM,UAAUC,YAA0B;AAC1C,QAAM,UAAU,WAAW;AAC3B,QAAM,WAAW,YAAY;AAC7B,QAAM,WAAW,YAAY;AAE7B,QAAM,EAAE,IAAI,OAAO,UAAU,MAAM,MAAM,IAAI,IAAI;AAEjD,QAAM,QAAQC,OAAM,QAAQ,MAAM;AAChC,QACE,CAAC,cACA,SAAS,OAAO,QAAQ,eAAe,KACtC,SAAS,OAAO,QAAQ,oBAAoB;AAE9C;AAEF,WAAO,cAAc,KAAK,EAAE,WAAW,CAAC;AAAA,EAE1C,GAAG,CAAC,YAAY,GAAG,CAAC;AAEpB,QAAM,WAAU,+BAAO,cAAa;AACpC,QAAM,UAAU,CAAC,EAAC,+BAAO,aAAY,gBAAgB,SAAS,MAAM,QAAQ;AAC5E,QAAM,aAAY,+BAAO,cAAa;AAEtC,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW;AAAA,EACb;AACF;;;ACzDA,SAAS,gBAAAC,qBAAoB;AAItB,IAAM,wBAAwB,CAAC;AAAA,EACpC;AACF,IAA2B,CAAC,MAAM;AAChC,QAAM,SAASC,cAAa;AAE5B,SAAO;AAAA,IACL,OAAO;AAAA,MACL,SAAS,YAAY;AACnB,cAAM,YAAY,QAAQ,EAAE,MAAM,SAAS,CAAC;AAAA,MAC9C;AAAA,MACA,aAAa,CAAC,MAA2C;AACvD,UAAE,eAAe;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AACF;;;ACnBA,OAAOC,YAAW;AAElB;AAAA,EACE,4BAAAC;AAAA,EACA,cAAAC;AAAA,OACK;;;ACLP,SAAS,sBAAAC,2BAA0B;AAE5B,IAAM,qBAAqBA,oBAAmB,eAAe,EAAE;AAAA,EACpE,WAAW;AAAA,EACX,KAAK;AACP,CAAC,EAAE,cAAc,CAAC,SAAS;AAAA,EACzB,OAAO,MAAM;AACX,QAAI,IAAI,EAAE;AACV,QAAI,UAAU,KAAK;AAAA,EACrB;AACF,EAAE;AAEK,IAAM,uBAAuB,mBAAmB;AAEhD,IAAM,yBAAyB,mBAAmB;AAElD,IAAM,4BAA4B,MAAM,mBAAmB;;;ADL3D,IAAM,6BAA6B,MAAM;AAC9C,QAAM,UAAUC,YAA0B;AAE1C,SAAO;AAAA,IACL,OAAO;AAAA,MACL,SAASC,OAAM,YAAY,MAAM;AAC/B,6BAAqB,IAAI,QAAQ,GAAG;AACpC,6BAAqB,UAAU,IAAI;AAAA,MACrC,GAAG,CAAC,QAAQ,GAAG,CAAC;AAAA,IAClB;AAAA,EACF;AACF;AAEO,IAAM,0BAA0BC,0BAAyB,QAAQ,EAAE;AAAA,EACxE,WAAW;AACb,CAAC;;;AE1BD,OAAOC,YAAW;AAIlB;AAAA,EACE,4BAAAC;AAAA,EACA,eAAAC;AAAA,EACA,gBAAAC;AAAA,EACA,cAAAC;AAAA,EACA;AAAA,OACK;;;ACVP;AAAA,EAIE,SAAAC;AAAA,EACA;AAAA,OACK;AACP,SAAS,mBAAmB;AAYrB,IAAM,sBAAsB,CACjC,QACA;AAAA,EACE;AAAA,EACA;AACF,MAIG;AACH,MAAI,MAAM,uBAAuB,IAAI;AAErC,MAAI,QAAQ,QAAQ,KAAK;AACvB,yBAAqB,MAAM;AAE3B,WAAO;AAAA,EACT;AAEA,QAAM,EAAE,OAAO,SAASC,QAAO,aAAa,IAC1C,OAAO,WAAkD,MAAM;AACjE,QAAM,UAAU,OAAO,GAAG;AAE1B,MAAI,CAAC,QAAS;AACd,MAAI,cAAc;AAChB,UAAM,aAAa,GAAG;AAAA,EACxB;AAEA,WAAwB,QAAQ;AAAA,IAC9B;AAAA,EACF,CAAC;AAED,uBAAqB,MAAM;AAE3B,cAAY,QAAQ,OAAO,SAAU;AAErC,SAAO;AACT;;;ADnCO,IAAM,gCAAgC,CAAC;AAAA,EAC5C;AACF,MAEM;AACJ,QAAM,SAASC,cAAa;AAC5B,QAAM,UAAUC,YAA0B;AAE1C;AAAA,IACE;AAAA,IACA,CAAC,MAAM;AACL,UAAI,oBAAoB,QAAQ,EAAE,SAAS,OAAO,CAAC,GAAG;AACpD,UAAE,eAAe;AAAA,MACnB;AAAA,IACF;AAAA,IACA;AAAA,MACE,kBAAkB,CAAC,OAAO;AAAA,IAC5B;AAAA,IACA,CAAC;AAAA,EACH;AAEA;AAAA,IACE;AAAA,IACA,MAAM;AACJ,UAAI,uBAAuB,UAAU,GAAG;AACtC,6BAAqB,MAAM;AAC3B,QAAAC,aAAY,QAAQ,OAAO,SAAU;AAAA,MACvC;AAAA,IACF;AAAA,IACA;AAAA,MACE,yBAAyB;AAAA,MACzB,kBAAkB,CAAC,OAAO;AAAA,IAC5B;AAAA,IACA,CAAC;AAAA,EACH;AAEA,SAAO;AAAA,IACL,cAAc,uBAAuB,IAAI;AAAA,EAC3C;AACF;AAEO,IAAM,2BAA2B,CAAC;AAAA,EACvC;AACF,MAAwD;AACtD,QAAM,WACJC,OAAM,YAAY,CAAC,MAAM;AACvB,yBAAqB,IAAI,EAAE,OAAO,KAAK;AAAA,EACzC,GAAG,CAAC,CAAC;AAEP,SAAO;AAAA,IACL,OAAO;AAAA,MACL,WAAW;AAAA,MACX;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACF;AAEO,IAAM,wBAAwBC,0BAAyB,OAAO,EAAE;AAAA,EACrE,WAAW;AAAA,EACX,WAAW;AACb,CAAC;;;AE9EM,IAAM,gBAAgB;AAAA,EAC3B,YAAY;AAAA,EACZ,UAAU;AACZ;;;ACNA,SAAS,YAAAC,iBAAgB;AACzB,SAAS,YAAY,iBAAAC,sBAAqB;AAInC,IAAM,oBAAoBC,eAAc,uBAAuB;AAAA,EACpE,UAAU;AAAA,IACR,WAAW,CAAC,EAAE,QAAQ,MAAM,MAAM;AAChC,UAAIC,UAAS,QAAQ,EAAE,KAAK,GAAG;AAC7B,mBAAW,MAAM;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;ACbD,SAAS,mBAAAC,wBAAuB;AASzB,IAAM,EAAE,qBAAqB,kBAAkB,oBAAoB,IACxEA;AAAA,EACE;AAAA,IACE,aAAa;AAAA,IACb,YAAY,CAAC;AAAA,IACb,cAAc,CAAC;AAAA,EACjB;AAAA,EACA,EAAE,MAAM,cAAc;AACxB;;;ACjBF,SAAS,gBAAAC,eAAc,cAAAC,mBAAkB;AACzC,SAAS,cAAAC,aAAY,eAAAC,cAAa,eAAAC,oBAAmB;AAO9C,IAAM,6BAA6B,MAAM;AAC9C,QAAM,UAAUC,YAAW;AAC3B,QAAM,SAASC,cAAa;AAC5B,QAAM,UAAUC,YAAW;AAC3B,QAAM,WAAWC,aAAY;AAC7B,QAAM,WAAWC,aAAY;AAE7B,QAAM,aAAa,oBAAoB,EAAE,IAAI,WAAW;AACxD,QAAM,cAAc,oBAAoB,EAAE,IAAI,YAAY;AAC1D,QAAM,eAAe,oBAAoB,EAAE,IAAI,aAAa;AAE5D,QAAM,EAAE,UAAU,IAAIJ;AAAA,IACpB,sBAAsB;AAAA,EACxB;AAEA,QAAM,cAAc,aAAa,SAAS,KAAK;AAE/C,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;ACrCA,SAAS,2BAA2B;AACpC;AAAA,EACE,gBAAAK;AAAA,EACA;AAAA,EACA,cAAAC;AAAA,OACK;AACP,SAAS,cAAAC,aAAY,eAAAC,cAAa,eAAAC,oBAAmB;AAO9C,IAAM,6BAA6B,MAAM;AAC9C,QAAM,SAASC,cAAa;AAC5B,QAAM,WAAWC,aAAY;AAC7B,QAAM,WAAWC,aAAY;AAC7B,QAAM,UAAUC,YAAW;AAE3B,QAAM,qBAAqB;AAAA;AAAA,IAEzB,CAACC,YAAW,CAAC,oBAAoBA,OAAM;AAAA,IACvC,CAAC;AAAA,EACH;AAEA,QAAM,UAAUC,YAAgC,sBAAsB,GAAG;AACzE,QAAM,EAAE,IAAI,UAAU,IAAI;AAE1B,QAAM,gBAAgB,oBAAoB,EAAE,IAAI,WAAW;AAC3D,QAAM,iBAAiB,oBAAoB,EAAE,IAAI,YAAY;AAC7D,QAAM,kBAAkB,oBAAoB,EAAE,IAAI,aAAa;AAE/D,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;","names":["createSlatePlugin","createSlatePlugin","createTSlatePlugin","createTSlatePlugin","isUrl","insertNodes","insertNodes","createTSlatePlugin","useCallback","useCallback","useEditorRef","useEditorRef","useEffect","useMemo","createPrimitiveComponent","useMemo","useEffect","createPrimitiveComponent","useEffect","isHotkey","useEffect","isHotkey","React","React","useEditorRef","useElement","useEditorRef","useElement","React","useEditorRef","useEditorRef","React","createPrimitiveComponent","useElement","createZustandStore","useElement","React","createPrimitiveComponent","React","createPrimitiveComponent","focusEditor","useEditorRef","useElement","isUrl","isUrl","useEditorRef","useElement","focusEditor","React","createPrimitiveComponent","isHotkey","toPlatePlugin","toPlatePlugin","isHotkey","createAtomStore","useEditorRef","useElement","useFocused","useReadOnly","useSelected","useElement","useEditorRef","useFocused","useReadOnly","useSelected","useEditorRef","useElement","useFocused","useReadOnly","useSelected","useEditorRef","useReadOnly","useSelected","useFocused","editor","useElement"]}